<!DOCTYPE html>
<html>
<head>
  <title>AJAX Table Example</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      // Load initial data
      loadData();

      // Add button click event
      $('#addButton').click(function() {
        var name = $('#nameInput').val();
        var model = $('#modelInput').val();
        var year = $('#yearInput').val();
        var motorType = $('#motorTypeInput').val();

        $.ajax({
          type: 'POST',
          url: 'backend/add',
          data: { name: name, model: model, year: year, motorType: motorType },
          success: function(response) {
            // Reload table data
            loadData();
          }
        });
      });

      // Edit button click event
      $('#tableBody').on('click', '.editButton', function() {
        var row = $(this).closest('tr');
        var id = row.attr('data-id');
        var name = row.find('.name').text();
        var model = row.find('.model').text();
        var year = row.find('.year').text();
        var motorType = row.find('.motorType').text();

        $('#editId').val(id);
        $('#editName').val(name);
        $('#editModel').val(model);
        $('#editYear').val(year);
        $('#editMotorType').val(motorType);
      });

      // Update button click event
      $('#updateButton').click(function() {
        var id = $('#editId').val();
        var name = $('#editName').val();
        var model = $('#editModel').val();
        var year = $('#editYear').val();
        var motorType = $('#editMotorType').val();

        $.ajax({
          type: 'POST',
          url: 'backend/update',
          data: { id: id, name: name, model: model, year: year, motorType: motorType },
          success: function(response) {
            // Reload table data
            loadData();
          }
        });
      });

      // Delete button click event
      $('#tableBody').on('click', '.deleteButton', function() {
        var row = $(this).closest('tr');
        var id = row.attr('data-id');

        $.ajax({
          type: 'POST',
          url: 'backend/delete',
          data: { id: id },
          success: function(response) {
            // Reload table data
            loadData();
          }
        });
      });

      function loadData() {
        $.ajax({
          type: 'GET',
          url: 'backend/data',
          success: function(response) {
            var tableBody = $('#tableBody');
            tableBody.empty();

            $.each(response, function(index, element) {
              var row = '<tr data-id="' + element.id + '">';
              row += '<td class="name">' + element.name + '</td>';
              row += '<td class="model">' + element.model + '</td>';
              row += '<td class="year">' + element.year + '</td>';
              row += '<td class="motorType">' + element.motorType + '</td>';
              row += '<td><button class="editButton">Edit</button></td>';
              row += '<td><button class="deleteButton">Delete</button></td>';
              row += '</tr>';
              tableBody.append(row);
            });
          }
        });
      }
    });
  </script>
</head>
<body>
  <h1>AJAX Table Example</h1>

  <h2>Add Element</h2>
  <input type="text" id="nameInput" placeholder="Name">
  <input type="text" id="modelInput" placeholder="Model">
  <input type="text" id="yearInput" placeholder="Year">
  <input type="text" id="motorTypeInput" placeholder="Motor Type">
  <button id="addButton">Add</button>

  <h2>Edit Element</h2>
  <input type="hidden" id="editId">
  <input type="text" id="editName" placeholder="Name">
  <input type="text" id="editModel" placeholder="Model">
  <input type="text" id="editYear" placeholder="Year">
  <input type="text" id="editMotorType" placeholder="Motor Type">
  <button id="updateButton">Update</button>

  <h2>Table</h2>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Model</th>
        <th>Year</th>
        <th>Motor Type</th>
        <th>Edit</th>
        <th>Delete</th>
      </tr>
    </thead>
    <tbody id="tableBody">
      <!-- Table rows will be dynamically added here -->
    </tbody>
  </table>
</body>
</html>
